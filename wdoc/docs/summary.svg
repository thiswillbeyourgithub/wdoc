<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="800" height="650" viewBox="0 0 800 650">
  <defs>
    <linearGradient id="boxGradient1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#e3f2fd" />
      <stop offset="100%" stop-color="#bbdefb" />
    </linearGradient>
    <linearGradient id="boxGradient2" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#e8f5e9" />
      <stop offset="100%" stop-color="#c8e6c9" />
    </linearGradient>
    <linearGradient id="boxGradient3" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#fff3e0" />
      <stop offset="100%" stop-color="#ffe0b2" />
    </linearGradient>
    <linearGradient id="boxGradient4" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#f3e5f5" />
      <stop offset="100%" stop-color="#e1bee7" />
    </linearGradient>
    <linearGradient id="featureGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#e8f4f8" />
      <stop offset="100%" stop-color="#d4e6f1" />
    </linearGradient>
    <filter id="dropShadow" filterUnits="userSpaceOnUse" width="200%" height="200%">
      <feDropShadow dx="3" dy="3" stdDeviation="3" flood-color="#00000033" />
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3949ab" />
    </marker>
    <marker id="contextArrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#00897b" />
    </marker>
    <!-- Add circular gradient for the cycle -->
    <radialGradient id="cycleGradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
      <stop offset="0%" stop-color="#e8f5e9" />
      <stop offset="100%" stop-color="#c8e6c9" />
    </radialGradient>
  </defs>

  <style>
    .flowchart-box {
      filter: url(#dropShadow);
      stroke-width: 2;
      rx: 12;
      ry: 12;
    }
    .box1 { fill: url(#boxGradient1); stroke: #1e88e5; }
    .box2 { fill: url(#boxGradient2); stroke: #43a047; }
    .box3 { fill: url(#boxGradient3); stroke: #fb8c00; }
    .box4 { fill: url(#boxGradient4); stroke: #8e24aa; }
    .cycle-step {
      font-family: 'Segoe UI', Arial, sans-serif;
      font-size: 14px;
      font-weight: 500;
      fill: #37474f;
      text-anchor: middle;
    }
    .flowchart-text {
      font-family: 'Segoe UI', Arial, sans-serif;
      font-size: 15px;
      font-weight: 500;
      fill: #37474f;
      text-anchor: middle;
    }
    .step-number {
      font-family: 'Segoe UI', Arial, sans-serif;
      font-size: 18px;
      font-weight: bold;
      fill: white;
      text-anchor: middle;
    }
    .flowchart-arrow {
      stroke: #3949ab;
      stroke-width: 3;
      fill: none;
      marker-end: url(#arrowhead);
    }
    .cycle-arrow {
      stroke: #43a047;
      stroke-width: 3;
      fill: none;
      marker-end: url(#arrowhead);
    }
    .context-arrow {
      stroke: #00897b;
      stroke-width: 2.5;
      fill: none;
      stroke-dasharray: 6,3;
      marker-end: url(#contextArrowhead);
    }
    .title-text {
      font-family: 'Segoe UI', Arial, sans-serif;
      font-size: 28px;
      font-weight: bold;
      fill: #1a237e;
      text-anchor: middle;
    }
    .subtitle-text {
      font-family: 'Segoe UI', Arial, sans-serif;
      font-size: 16px;
      fill: #455a64;
      text-anchor: middle;
    }
    .feature-box {
      fill: url(#featureGradient);
      stroke: #0277bd;
      stroke-width: 1.5;
      rx: 8;
      ry: 8;
      filter: url(#dropShadow);
    }
    .feature-text {
      font-family: 'Segoe UI', Arial, sans-serif;
      font-size: 13px;
      fill: #263238;
      text-anchor: middle;
      font-weight: 500;
    }
    .step-circle {
      fill: #3949ab;
      stroke: #1a237e;
      stroke-width: 1;
    }
    .icon {
      fill: none;
      stroke: #455a64;
      stroke-width: 1.5;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
    .cycle-icon {
      fill: none;
      stroke: #43a047;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
  </style>

  <!-- Title with decorative underline -->
  <text x="400" y="40" class="title-text">wdoc Summary Algorithm</text>
  <line x1="250" y1="50" x2="550" y2="50" stroke="#1a237e" stroke-width="3" />
  <text x="400" y="75" class="subtitle-text">Advanced document summarization with context awareness and markdown formatting</text>

  <!-- Circular Process Flow -->
  <circle cx="400" cy="200" r="150" fill="url(#cycleGradient)" stroke="#43a047" stroke-width="2" filter="url(#dropShadow)" />
  
  <!-- Center icon - document -->
  <rect x="375" y="175" width="50" height="50" rx="5" ry="5" fill="#f5f5f5" stroke="#43a047" stroke-width="1.5" />
  <path d="M385,185 h30 M385,195 h30 M385,205 h30 M385,215 h20" class="cycle-icon" />
  <text x="400" y="240" class="flowchart-text" style="font-size: 14px; font-weight: bold;">Document</text>
  
  <!-- Step 1: Split Document -->
  <circle cx="400" cy="80" r="30" class="flowchart-box box1" />
  <text x="400" y="85" class="step-number">1</text>
  <text x="400" y="50" class="cycle-step">Split Document</text>
  <text x="400" y="65" class="cycle-step" style="font-size: 12px; font-style: italic;">Into Chunks</text>
  
  <!-- Step 2: Summarize Chunks -->
  <circle cx="550" cy="150" r="30" class="flowchart-box box2" />
  <text x="550" y="155" class="step-number">2</text>
  <text x="590" y="135" class="cycle-step">Summarize Each</text>
  <text x="590" y="150" class="cycle-step" style="font-size: 12px; font-style: italic;">With Context</text>
  
  <!-- Step 3: Concatenate -->
  <circle cx="550" cy="250" r="30" class="flowchart-box box3" />
  <text x="550" y="255" class="step-number">3</text>
  <text x="595" y="250" class="cycle-step">Concatenate</text>
  <text x="595" y="265" class="cycle-step" style="font-size: 12px; font-style: italic;">Summaries</text>
  
  <!-- Step 4: Optional Recursive -->
  <circle cx="400" cy="320" r="30" class="flowchart-box box4" />
  <text x="400" y="325" class="step-number">4</text>
  <text x="400" y="360" class="cycle-step">Optional</text>
  <text x="400" y="375" class="cycle-step" style="font-size: 12px; font-style: italic;">Recursion</text>
  
  <!-- Cycle arrows -->
  <path d="M425,90 Q500,100 540,125" class="cycle-arrow" />
  <path d="M550,180 Q550,220 550,220" class="cycle-arrow" />
  <path d="M525,265 Q450,300 425,310" class="cycle-arrow" />
  <path d="M375,308 Q300,280 250,200 Q230,150 340,90" class="cycle-arrow" />
  
  <!-- Context flow visualization -->
  <path d="M510,180 Q400,300 280,180 Q260,150 360,105" class="context-arrow" />
  <rect x="280" y="150" width="120" height="22" rx="11" ry="11" fill="#e0f2f1" stroke="#00897b" stroke-width="1" />
  <text x="340" y="165" class="flowchart-text" style="font-size: 12px; fill: #00695c;">Context Flow</text>

  <!-- Output arrow and result -->
  <rect x="300" y="430" width="200" height="70" class="flowchart-box" fill="#e0f7fa" stroke="#00acc1" />
  <text x="400" y="455" class="flowchart-text">Final Summary</text>
  <text x="400" y="475" class="flowchart-text" style="font-size: 12px;">Rich Markdown Output</text>
  
  <path d="M400,350 V430" class="flowchart-arrow" />
  
  <!-- Document output icon -->
  <path d="M360,460 h10 v15 h-10 z M365,455 v5 M362,465 h6 M362,470 h6" class="icon" stroke="#00acc1" fill="#e0f7fa" />

  <!-- Key Features Section with Icons -->
  <text x="400" y="520" class="flowchart-text" style="font-size: 18px; font-weight: bold; fill: #0277bd;">Key Features</text>
  
  <rect x="100" y="540" width="130" height="70" class="feature-box" />
  <text x="165" y="565" class="feature-text">Markdown Format</text>
  <text x="165" y="585" class="feature-text">with Bullet Points</text>
  <!-- Markdown icon -->
  <path d="M120,565 h5 v15 h5 l5,-7.5 l5,7.5 h5 v-15" class="icon" stroke="#0277bd" stroke-width="1.5" />
  
  <rect x="250" y="540" width="130" height="70" class="feature-box" />
  <text x="315" y="565" class="feature-text">Logic Preservation</text>
  <text x="315" y="585" class="feature-text">with Indentation</text>
  <!-- Logic icon -->
  <path d="M270,565 h5 M270,575 h10 M270,585 h15" class="icon" stroke="#0277bd" stroke-width="1.5" />
  
  <rect x="400" y="540" width="130" height="70" class="feature-box" />
  <text x="465" y="565" class="feature-text">Detail Retention</text>
  <text x="465" y="585" class="feature-text">Not High-Level Only</text>
  <!-- Detail icon -->
  <path d="M420,575 a7,7 0 1,0 14,0 a7,7 0 1,0 -14,0 M427,568 v-3 M427,582 v3" class="icon" stroke="#0277bd" stroke-width="1.5" />
  
  <rect x="550" y="540" width="130" height="70" class="feature-box" />
  <text x="615" y="565" class="feature-text">Multiple Language</text>
  <text x="615" y="585" class="feature-text">Support</text>
  <!-- Language icon -->
  <path d="M570,575 h10 M580,565 v20 M580,575 h10" class="icon" stroke="#0277bd" stroke-width="1.5" />

  <!-- Advanced features note with highlight box -->
  <rect x="250" y="620" width="300" height="22" rx="11" ry="11" fill="#e3f2fd" stroke="#1e88e5" stroke-width="1" />
  <text x="400" y="635" class="subtitle-text" style="font-style: italic; fill: #1565c0;">Using claude-3-7-sonnet as default model</text>
</svg>
