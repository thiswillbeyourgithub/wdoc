flowchart TD
    subgraph Inputs["User Arguments"]
        Path["Path"]
        TopK["Top K"]
        UserQuery["User Query"]
    end

    VectorStoreEmbeddings["VectorStore + Embeddings"]
    Chunker["Loading & Chunking<br/>Text splitting"]

    Path --> Chunker
    Chunker --> VectorStoreEmbeddings

    SearchOutput["Output<br/>37 documents"]
    Raphael["Raphael the Rephraser<br/>Query expansion"]
    Eve["Eve the Evaluator<br/>Document filtering"]
    
    UserQuery --> Raphael
    Raphael --> VectorStoreEmbeddings
    TopK -->|ex: top_k=50| VectorStoreEmbeddings
    VectorStoreEmbeddings -->|50 docs| Eve
    Eve -->|37 docs| SearchOutput
